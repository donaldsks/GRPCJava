apply plugin: 'protobuf'

description = "Stubby: Integration Testing"

// Add dependency on the protobuf plugin
buildscript {
    repositories {
        mavenCentral()
    }
    dependencies {
        classpath libraries.protobuf_plugin
    }
}

dependencies {
    compile project(':stubby-core'),
            project(':stubby-netty'),
            project(':stubby-okhttp'),
            project(':stubby-stub'),
            project(':stubby-testing'),
            libraries.junit,
            libraries.mockito
}

// Allow intellij projects to refer to generated-sources
idea {
    module {
        // The whole build dir is excluded by default, but we need build/generated-sources,
        // which contains the generated proto classes.
        excludeDirs = [file('.gradle')]
        excludeDirs += files(file("$buildDir/").listFiles())
        excludeDirs -= file("$buildDir/generated-sources")
    }
}
